### 캐시 메모리

- 저장 장치 계층 구조

  - 빠른 저장 장치와 용량이 큰 저장 장치는 반비례한다.
    ex)
    CPU와 가까운 저장 장치는 빠르지만, 멀리 있는 저장 장치는 느리다.
    속도가 빠른 저장 장치는 저장 용량이 작고, 비싸다.

    | 장치         | 속도 | 용량 | 가격 |
    | ------------ | ---- | ---- | ---- |
    | 레지스터     | 상   | 하   | 비쌈 |
    | 메모리       | 중   | 중   | 중   |
    | 보조기억장치 | 하   | 상   | 저렴 |

- 캐시 메모리

  - CPU가 메모리에 접근하는 속도는 레지스터보다 느리다. 하지만, 프로그램을 실행하기 위해서는 메모리에 빈번하게 접근해야만 한다.
    그래서 등장한 저장 장치가 "캐시 메모리" 이다.
  - 캐시메모리는 CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM기반의 저장 장치다.
  - 캐시메모리는 여러개가 존재한다. CPU와 가까운순서대로 계층을 구성하는데 가장 가까운 캐시메모리부터 L1캐시 -> L2캐시 -> L3캐시라고 부른다.
    (L1과 L2 캐시는 각 CPU 코어에 존재하고 L3캐시는 모든 멀티코어에서 공유한다.)

- 참조 지역성 원리

  - 캐시 메모리는 CPU가 사용할 법한 대상을 예측하여 저장한다. 이때 자주 사용할 예측할 데이터가 들어맞아 캐시 메모리 내 데이터가 활용될 경우 "캐시 히트" 라고한다.
    반대로 예측이 틀려 메모리에서 데이터를 직접 가져와야 하는 경우 "캐시 미스" 라고 한다.

  - 여기서 캐시 히트가 되는 비율을 캐시 적중률 이라고 한다. (캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수) = 캐시 적중률)

  - CPU가 사용할 법한 데이터를 알 수 있는 방법이 바로 "참조 지역성 원리" 이다.
    - CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다. (시간 지역성)
      - 예를들어 프로그래밍 언어의 변수로 예를들 수 있다. 한번 만든 변수는 언제든 다시 참조할 가능성이 있다. 즉, CPU는 최근에 접근했던 메모리 공간을 여러번 다시 접근할 수 있다.
    - CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. (공간 지역성)
      - 예를들어 여러개의 프로그램들이 실행되고 있다고 가정해보자. 이 때 각각의 프로그램의 관련 데이터들은 메모리에 모여서 저장이 되어있다.
