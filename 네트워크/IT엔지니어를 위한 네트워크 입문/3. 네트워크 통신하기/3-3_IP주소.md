### IP 주소

- 2계층에서는 물리 주소인 MAC 주소를, 3계층에서는 논리 주소인 IP주소를 사용한다.
- IP주소를 포함한 다른 프로토콜 스택의 3계층 주소는 특징이 있다.
  1. 사용자가 변경 가능한 논리 주소이다.
  2. 주소에 레벨이 있다. 그룹을 의미하는 네트워크 주소와 호스트 주소로 나뉜다.

#### IP 주소 체계

- IP주소의 종류

  - IPv4

    - 우리가 흔히 사용하는 IP 주소는 32비트인 IPv4 주소이다.
    - 표기법은 4개의 옥텟이라고 부르는 8비트 단위로 나누고, 옥텟은 "." 으로 구분한다. (0 ~ 255의 값을 사용할 수 있다.)
    - ex) 192 . 168 . 0 . 1
      11000000(192) . 10101000(168) . 00000000(0) . 00000001(1) -> 각 자리에 8비트 옥텟으로 나뉨 (8비트 x 4 = 32비트)

  - IPv6
    - 128비트의 주소다.

- 네트워크 주소와 호스트 주소로 나뉜다.

  - 네트워크 주소
    - 호스트들을 모은 네트워크를 지칭하는 주소.
      네트워크 주소가 동일한 네트워크를 로컬 네트워크라고 한다.
  - 호스트 주소
    - 하나의 네트워크 내에 존재하는 호스트를 구분하기 위한 주소

- 클래스
  - IP 주소 체계는 필요한 호스트 IP 개수에 따라 네트워크의 크기를 다르게 할당할 수 있는 클래스 개념을 도입헀다.
  - 종류
    - A 클래스
      - A 클래스는 가장 큰 주소를 갖을 수 있으며 약 1600만 개의 IP를 가질 수 있다.
      - 첫 번째 옥텟에 네트워크 주소와 호스트 주소를 나누는 구분자가 있다. (255 . 0 . 0 . 0 -> 네트워크 . 호스트 . 호스트 . 호스트)
      - 옥텟 주소: 0 ~ 127
    - B 클래스
      - B 클래스는 약 6만 5천개
      - 두 번째 옥텟에 구분자가 있다. (255 . 255 . 0 . 0 -> 네트워크 . 네트워크 . 호스트 . 호스트)
      - 옥텟 주소: 128 ~ 191
    - C 클래스
      - C 클래스는 약 250개의 IP주소를 가질 수 있다.
      - 세 번째 옥텟에 구분자가 있다. (255 . 255 . 255 . 0 -> 네트워크 . 네트워크 . 네트워크 . 호스트)
      - 옥텟 주소: 192 ~ 223

#### 클래스풀과 클래스리스

- 클래스풀 ?

  - IP 주소 체계에서 설명한 클래스 기반의 IP 주소 체계를 클래스 풀 이라고 부른다.
  - 이 주소 체계에서는 맨 앞자리 숫자만 보면 자연스럽게 이 주소가 어느 클래스에 속해 있는지 구분할 수 있기 때문에 따로 구분자(서브넷 마스크)가 필요없었다.

- 클래스리스 ?
  - 처음 클래스 풀로는 확장성과 효율성을 모두 잡는 좋은 주소 체계 였지만, 인터넷이 상용화되면서 늘어나는 IP 숫자를 감당할 수 없었다.
    이러한 문제를 해결하기위해 3가지 보존, 전환 전략을 만들어냈다.
    그 중 첫 번째 단기 대책이 "클래스리스", "CIDR" 기반의 주소 체계다.
  - 인터넷 초창기에 여러 회사에서 미래를 위해 IP를 많이 확보할 수 있는 A클래스(1600만개)를 할당 받았지만, 실제로는 수천 수만 개만 사용하는 곳이 대부분이엿다.
    이렇다보니 사용되지않는 IP가 많아졌기 때문에 IP가 낭비가 되었다. 그렇다고해서 이 비어있는 IP를 다른 기관이 사용하도록 할 수 없었다.
    그래서 아예 클래스를 버리기로 했다 이것이 "클래스 리스" 이다.
  - 클래스리스 네트워크에서는 별도로 네트워크와 호스트 주소를 나누는 구분자를 사용해야 하는데 이 구분자를 "서브넷 마스크" 라고 부른다.

#### 서브네팅

- 원래 부여된 클래스의 기준을 무시하고 새로운 네트워크-호스트 구분 기준을 사용자가 정해 원래 클래스풀 단위의 네트워크보다 더 쪼개 사용하는 것을 "서브네팅"이라고 한다.
- 서브네팅에 대해 고민해야하는 경우

  - 네트워크 사용자 입장

    - 네트워크에서 사용할 수 있는 IP범위 파악
    - 기본 게이트웨이와 서브넷 마스크 설정이 제대로 되어있는지 확인
    - 주어진 네트워크 범위 밖의 IP를 할당하거나 서브넷 마스크를 잘못 입력하면 통신에 문제가 생길수 있다.
      옥텟단위의 네트워크 경우 10진수이기 때문에 이해하기 쉽지만, 서브네팅은 비트 단위 이기때문에 어떤 네트워크이고 어떤 IP범위가 네트워크인지 판단하기 어렵다.

  - 네트워크 설계자 입장
    - 네트워크 설계 시 네트워크 내에 필요한 단말을 고려한 네트워크 범위 설계

#### 공인IP 와 사설IP

- 공인 IP

  - 인터넷에 접속하려면 IP주소가 있어야 되고 이 IP는 전 세계에서 유일해야 하는 식별자다.
    이런 IP 주소를 공인IP 라고 한다.
  - 통신사업자로부터 IP 주소를 할당받거나 IP할당기관에서 인터넷 독립기관 주소를 할당받은후 독립IP를 받아야 한다.

- 사설 IP
  - 공인 IP 와는 다르게 인터넷에 연결하지 않고 개인적인 네트워크를 구성 한다면 공인IP 없이도 네트워크를 구축할 수 있다.
    이때 사용하는 IP주소를 사설 IP 라고한다.
  - 인터넷에 접속하지 않거나 NAT기술을 사용할 경우에는 사설 IP를 사용한다.
