### 방화벽

- 네트워크 중간에 위치해 해당 장비를 통과하는 트래픽을 사전에 주어진 정책 조건에 맞추어 허용하거나 차단하는 장비.
- 일반적으로 방화벽은 3, 4계층에서 동작하며 상태 기반 엔진으로 동작한다.

#### 초기 방화벽

- 초기 방화벽에서는 패킷의 인과 관계를 확인하지 못하고 장비의 등록된 정책만 패킷을 필터링했다.
- 방화벽에 설정된 정책에 따라 동작하므로 스테이트리스 또는 패킷 필터 방화벽이라고 한다.

#### 현대적 방화벽의 등장(SPI 엔진)

- 기존에 방화벽에 상태값 없이 정책만으로 제어하던 한계를 극복하기 위해 상태 기반 방화벽이 나왔다. (현재 우리가 사용하는 방화벽.)

#### 방황벽 동작 방식

1. 장비에 패킷이 들어오면 우선 세션 상태 테이블을 확인한다.
2. 조건에 맞는 세션 정보가 세션 테이블에 있을때, 포워딩 테이블을 확인한다.(라우팅, ARP포함)
3. 조건에 맞는 세션 정보가 세션 테이블에 없을 때, 방화벽 정책을 확인한다.
4. 방화벽 정책은 맨 위의 정책부터 확인해 최종 정책까지 확인한 후 없을 때 암시적인 거부규칙을 참고해 차단된다.
5. 허용 규칙이 있으면 내용을 세션 테이블에 적어 넣는다.
6. 포워딩 테이블을 확인한다.(라우팅, ARP포함)
7. 조건에 맞는 정보가 포워딩 테이블에 있을 때, 적절한 인터페이스로 패킷을 포워딩한다.
8. 조건에 맞는 정보가 포워딩 테이블에 없을 때, 패킷을 폐기한다.
